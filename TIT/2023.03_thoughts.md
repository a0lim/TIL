## 2023.03.03
개별처리 계산부분에서 계속 에러가 난다. if문도 많고 예외처리도 많아서 내가 짰는데도 헷갈린다. 좀 더 직관적이게 start와 end 변수를 두고 케이스별로 값을 다르게 하는 방식으로 싹 다 바꿀까 고민중이다.  
좀 더 생각해보자 화이팅

## 2023.03.15
그동안 미뤄졌던 자바 공부를 열심히 했다. 이제 드디어 책 한 권을 끝냈고, 그 다음엔 무엇을 어떻게 공부할지 고민하고있다.  
사실 데이터분석 쪽으로 하둡/스파크를 공부해볼까 생각도 했는데, 다음주부터는 바빠질 것 같아서 선뜻 시작하지 못하고 있다.
상황을 좀 보고 시작해야겠다.  
그리고 오늘은 test code를 작성해봤다. 자바 공부하면서 따라 써보기는 했지만 내가 직접 처음부터 작성하는 테스트 코드는 처음이다.  
우선은 다른 분이 작성하신 코드를 참고해서 success 케이스는 만들었다.  
그리고 fail 케이스로는 어떤 예외를 처리해야할지 정리했다.  
test code를 작성하려는 기간비용현황 서비스는 모두 read이긴 하지만 entity를 그대로 가져오는 것이 아니라, join과 계산 로직들이 있어서 테스트할 부분이 꽤 있었다.  
포괄적으로 말하자면 invalid id, datetime error(시작일>종료일), invalid 특정 타입(작성 필수)를 테스트할 생각이다.  
화이팅!

## 2023.03.16
남의 코드를 따라하기만 했지만 의외로 테스트 코드 짜는 게 재밌었다!  
백엔드 업무에서 조금 아쉬웠던 부분이 성공 여부가 가시적으로 잘 안 보인다는 것이었는데, success라는 단어를 보니 아쉬움이 채워졌다^^  
그래서 이것저것 해보려고 했는데, request에 있지 않은 멤버도 변경해서 테스트할 수 있는건지 잘 모르겠다.  
구글링을 해보니 mock 같은 용어도 나오고, 테스트 코드에도 종류가 많아 보인다. 하나씩 공부하면서 테스트 해봐야겠다.  
화이팅!!

## 2023.03.20
단위 테스트는 저번주로 모두 끝났고, 이제 통합 테스트를 시작했다. 아무래도 read 서비스라서 단위 테스트를 할 부분은 많지 않았다.  
그래도 현황에서 계산 로직이 들어가기 때문에 통합 테스트 부분에서는 5개 정도는 하려고 한다.  
오늘 작성한 코드는 최종 잔액이 0인지 확인하는 테스트 코드였다.  
최종 잔액을 구하기 위해서 List<vo> 형태로 된 데이터에서 특정 값을 뽑아내야 했는데, 이걸 어떻게 하는지 몰라서 헤맸다.  
처음에는 map을 사용해서 List<map<String, Object>>로 만들고 행, 열 값을 입력해서 가져오려고 했다.  
그런데 어디가 문제인지 계속 알 수 없는 에러가 났다.  
그래서 두번째로 찾은 방법은, stream을 이용하는 것이다. stream으로 만들고, map으로 붙이면서 특정 column의 값들을 가져오는 코드다.  
dto.stream().map(m -> m.[column]()).collect ... 로, collect, collectors같은 함수들도 사용이 되었다.  
우선 test는 다행히 잘 되었지만, 이 원리를 이해한 것은 아니라 추가적으로 공부하고 다양하게 활용해봐야겠다.  
수고했다!!

## 2023.03.21
오늘은 각 field 마다 계산이 잘 되었는지 확인하는 통합 테스트 코드를 짰다.  
마지막 잔액이 0인지, 마지막 잔여일수가 0인지, 계산금액의 총합이 맞는지, 계산일수의 총합이 맞는지, 마지막 년월이 endDate의 년월과 같은지를 체크했다.  
그리고 내일은 지난 잔액 + 현재 계산금액 = 현재 잔액인지 여부를 검사할 예정이다.(일수도 마찬가지로 검사)
이 검사 과정에서 python의 range 함수를 사용해서 for문을 돌리고 싶은데, java에서는 range 역할을 하는 메소드가 있는지 찾아보고 있다.  
